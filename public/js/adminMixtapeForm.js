"use strict";var form=document.querySelector(".dashboard__edit-article"),titleInput=form.querySelector('input[name="title"]'),artistsInput=form.querySelector('input[name="artists"]'),descriptionInput=form.querySelector('textarea[name="description"]'),releaseDateInput=form.querySelector('input[name="releaseDate"]'),publishedInput=form.querySelector('input[name="published"]'),zipInput=form.querySelector('input[name="zip"]'),artworkInput=form.querySelector('input[name="coverImage"]'),artworkImage=form.querySelector(".dashboard__edit-mixtape--artwork"),defaultArtwork=artworkImage.src,formErrors=document.querySelector(".form-errors"),lightbox=document.querySelector(".lightbox"),deleteButton=document.querySelector("#dashboard__edit-video--delete"),closeLightboxButton=document.querySelector(".lightbox__modal--cancel"),isEditPage=window.location.toString().indexOf("/edit/")>0;function submitForm(e){e.preventDefault();var t=new FormData;t.append("title",titleInput.value),t.append("artists",artistsInput.value),t.append("description",descriptionInput.value),t.append("published",publishedInput.checked),t.append("releaseDate",releaseDateInput.value),zipInput.files&&zipInput.files[0]&&t.append("zip",zipInput.files[0]),artworkInput.files&&artworkInput.files[0]&&t.append("artwork",artworkInput.files[0]),axios.post(window.location.href,t).then(function(e){window.location="/admin/mixtapes"}).catch(function(e){console.log(e),errorFlash([e.response.data.error])})}function errorFlash(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];formErrors.innerHTML="",0!==e.length&&"undefined"!==e[0]||(e=["An error occurred, please try again"]),e.forEach(function(e){void 0===e&&(e="An error occured");var t=document.createElement("p");t.innerText=e,formErrors.appendChild(t)})}isEditPage&&(deleteButton.addEventListener("click",function(){return lightbox.classList.toggle("active")}),closeLightboxButton.addEventListener("click",function(){return lightbox.classList.toggle("active")})),form.addEventListener("submit",function(e){submitForm(e)}),artworkInput.addEventListener("change",function(e){if(artworkInput.files&&artworkInput.files[0]){var t=new FileReader;t.onload=function(e){artworkImage.src=e.target.result,artworkImage.classList.remove("hidden")},t.readAsDataURL(artworkInput.files[0])}else artworkImage.src=defaultArtwork});